import scrapy
import unicodedata

all_restaurant_names = ['The Dearborn', 'Stock and Ledger', 'Remingtons', 'Roanoke Restaurant', 'The Gage', 'The Marq',
                        'MingHin Cuisine', 'Nandos PERiPERi', 'Cochon Volant Brasserie', 'Green Apple PHOever',
                        'Ge Pa De Caffe', 'Roti Modern Mediterranean', 'Shake Shack', 'Pastoral', 'Seven Lions',
                        'Wildberry Pancakes and Cafe', 'Heaven on Seven Wabash', 'Millers Pub',
                        'American Craft Kitchen Bar', 'Oasis Cafe', 'Filini', '312 Chicago', 'Brown Bag Seafood',
                        'Union Squared', 'Osaka Sushi Express Fresh Fruit Smoothies', 'Billy Goat Tavern Lake Street',
                        'Eggys Diner', 'Exchequer Restaurant Pub', 'Protein Bar', 'Tokyo Lunch Boxes', 'Atwood',
                        'Elephant Castle', 'La Bamba', 'Park Grill at Millennium Park', 'Early Society',
                        'University Club of Chicago', 'BenjYehuda', 'Spotted Monkey', 'Frontera Fresco',
                        'Prime Provisions',
                        'Lukes Lobster City Hall', 'Acanto', 'Brightwok Kitchen', 'Trattoria No 10', 'Naf Naf Grill',
                        'Cindys', 'Broken English Taco Pub The Loop', 'Revival Food Hall', 'Ara On', 'The Living Room',
                        'Petterinos', 'Capriottis Sandwich Shop', 'Bibibop Asian Grill', 'Boleo', 'Pokéworks',
                        'Primebar',
                        'Blackwood BBQ', 'Mezcalina', 'RAISED Urban Rooftop Bar', 'Sweetwater Tavern and Grille',
                        'Pierogi Heaven', 'The Florentine', 'New Orleans Kitchen', 'Good Stuff Eatery',
                        'The Commons Club',
                        'The Italian Village Restaurants', 'Stocks and Blondes', 'Ajida', 'III Forks',
                        'Staytion Market Bar', 'Stetsons Modern Steak Sushi', 'Mortons The Steakhouse',
                        'Giordanos Jackson',
                        'Pizanos Pizza', 'Naansense', 'UB Dogs', 'Poke Poké', 'Rosebud Prime',
                        'The Berghoff Restaurant',
                        'State and Lake Chicago Tavern', 'Vapiano Chicago Downtown', 'Costa Vida Fresh Mexican Grill',
                        'Crêpe Bistro', 'Lloyds Chicago', 'Be Leaf', 'Hannahs Bretzel', 'Ryo Sushi', 'Pueblo Chicago',
                        'Toni Patisserie Cafe', 'Gayles Best Ever Grilled Cheese', 'Rudys Bar Grille', 'Bella Bacinos',
                        'One North Kitchen Bar', 'Pazzos 311', 'The Walnut Room', 'City Social', 'honeygrow', 'Rivers',
                        'The Grillroom Chophouse Wine Bar', 'Wow Bao', '1901 At AceBounce', 'Benjyehuda', 'Steadfast',
                        'Hot Woks Cool Sushi', 'Farmers Fridge', 'sweetgreen', 'Taylor Gourmet',
                        'Ronnys Original Chicago Steak House', 'Nutella Cafe', 'Peach And Green', 'Flat Top Grill',
                        'IDOF I Dream of Falafel', 'Taco Bell Cantina', 'La Catina Chophouse',
                        'Market Creations Prudential Plaza', 'Falafel Island', 'Chucks A Kerry Simon Kitchen',
                        'Dos Toros Taqueria', 'Soup Barz', 'IPO', 'Habanero Baja Grill', 'Beef and Brandy Restaurant',
                        'Pearl Brasserie', 'Noodles Company', 'Lockwood Restaurant Bar', 'Avanti Caffé', 'Pita Express',
                        'The Metropolitan Club', 'Bowls Bao', 'Russian Tea Time', 'Vivere', 'Market Creations Cafe',
                        'Monks Pub', 'Zoup', 'Just Salad', 'Chicken Planet', 'Ceres Cafe', 'Lukes Italian Beef',
                        'Beatrix Market', 'AIRE', 'Silk Road', 'Bockwinkels', 'Bombay Wraps', 'Mercato at RustleRoux',
                        'QDOBA Mexican Eats', 'Mezza Mediterranean Grill', 'Townhouse Restaurant Wine Bar',
                        'Terzo Piano',
                        'Tilted Kilt Pub Eatery', 'Park Cafe', 'The MidAmerica Club', 'Antique Taco Chiquito',
                        'The Eastman Egg Company', 'Sweet Swabian', 'Marc Burger', 'Furious Spoon Revival Food Hall',
                        'Emerald Loop', 'Sushi Sai', 'The Fat Shallot', 'The Budlong Revival Food Hall', 'Bob Cha',
                        'Boston Blackies', 'Seven Bar and Restaurant', 'OBriens Riverwalk Cafe', 'I Love Sushi',
                        'The Landing', 'Sopraffina Marketcaffe', 'Americas Dog and Burger', 'Off the Tracks Grill',
                        'UBS Tower Cafeteria', 'Delmonico', 'The Franklin Tap', 'Market Thyme', 'La Cocina',
                        'Taco Fresco',
                        'Caffè Baci', 'Fontanos Subs', 'Corner Bakery Cafe', 'Halsted Street Deli', 'Bake For Me',
                        'Cosi',
                        'Le Pain Quotidien', 'Gold Coast Dogs', 'Metropolis', 'Ruchi', 'Olive Mediterranean Grill',
                        'Sixty Five Chinese Restaurant', 'Cardozos Pub', 'Great Street', 'Mixed Greens', 'Als Beef',
                        'Burrito Beach', 'Jasons Deli', 'Goddess And The Baker', 'Nesh Mediterranean Grill',
                        'Mrs Levys Deli', 'Tokyo Lunch Boxes Catering', 'Potters', 'Potbelly Sandwich Shop',
                        'Which Wich',
                        'Urban Market', 'Tradition', 'Forum 55', 'Mallers Deli', 'Pazzos',
                        'Burger Bar Chicago South Loop',
                        'Sociale Chicago', 'Lou Malnatis Pizzeria', 'Kome Japanese Eatery', 'Armands Victory Tap',
                        'Half Sour', 'Mercat a la Planxa', 'Sofi Restaurant', 'Bucks Four Star Grill',
                        'South Loop Club',
                        'Meli Cafe', 'Little Branch Cafe', 'BeeZzee Fresh Food', 'Chicago Waffles',
                        'Plymouth Rooftop Bar Grill', 'The Scout', 'Frannies Cafe', 'Aurelios Pizza', 'Porkchop',
                        'Mai Tai Sushi and Sake Bar', '720 South Bar Grill', 'Weather Mark Tavern',
                        'Spanglish Mexican Kitchen', 'Hax Hops Hamburgers', 'Tutto Italiano', 'East Asian Bistro',
                        'The Link Chicago', 'Paulys Pizzeria', 'Urban Counter', 'Bar Louie', 'The Field Bistro',
                        'Arciel',
                        'Eleven City Diner', 'Bulldog Ale HouseChicago', 'Poke Roll', 'The Art of Pizza',
                        'Pats Pizzeria',
                        'Chicago Curry House', 'Harolds Chicken Shack', 'Cafecito', 'Gioco', 'Chicago Pizza Boss',
                        'Kim Carlos Hot Dog Stand', 'Cocos Famous Deep Fried Lobster', 'Thai Spoon and sushi', 'Niu B',
                        'Kai Sushi', 'Umai', 'Buddy Guys Legends', 'Asian Outpost', 'Devil Dawgs South State',
                        'Tapas Valencia', 'Villains Chicago', 'Flacos Tacos', 'Mac Kellys', 'Kitty OSheas', 'Giordanos',
                        'Saucy Porka', 'First Draft', 'Lobo Rey', 'The Chicago Firehouse Restaurant',
                        'Himalayan Restaurant', 'Flo Santos', 'Yolk South Loop', 'Pita Heaven',
                        'Nepal House Indian Nepalese', 'The Bongo Room', 'Kurah Mediterranean', 'Cactus Bar Grill',
                        'Meis Kitchen', 'Five Guys', 'Muscle Maker Grill', 'Café Press', 'Panera Bread',
                        'Taco Burrito King', 'Relish Chicago Hot Dogs', 'Wingstop', 'Standing Room Only',
                        'HERO Coffee Bar',
                        'Boni Vino Ristorante Pizzeria', 'Lasalle Cafe Luna', 'DMK Burger Bar', 'Mickys Chicken Fish',
                        'Reggies Pizza Express', 'Fountain Café', 'Greek Kitchen', 'Harrys Sandwich Shop',
                        'La Cocina Mexican Grill', 'Field Bistro', 'Kamehachi', 'Halsted Street Deli Bagel',
                        'Armands Pizzeria', 'Jimmy Johns', 'Girl the Goat', 'Gideon Sweet', 'Au Cheval', 'Bar Siena',
                        'MAD Social', 'Tuscany Taylor', 'Regards to Edith', 'High Five Ramen', 'The Press Room',
                        'Duck Duck Goat', 'Monteverde', 'Davanti Enoteca', 'The Rosebud', 'Green Street Smoked Meats',
                        'Bad Hunter', 'Kumas Corner', 'Chilango Mexican Street Food', 'El Che Bar', 'The Publican',
                        'Little Goat Diner', 'Cold Storage', 'Ramen Takeya', 'La Lagartija Taqueria', 'Swift Sons',
                        'Conte Di Savoia', 'Chicken Farm Shop', 'The Office', 'Bonci', 'Francescas on Taylor', 'BLVD',
                        'La Sirena Clandestina', 'Tufanos Vernon Park Tap', 'RoSals', 'City Mouse',
                        'Viaggio Ristorante Lounge', 'Ricanos', 'Roister', 'Jade Court', 'Urbanbelly', 'ML Kitchen',
                        'Leña Brava', 'The Madison Bar and Kitchen', 'Sweet Maple Cafe', 'Galata Turkish Restaurant',
                        'Fulton Market Company', 'Guss World Famous Fried Chicken', 'GyuKaku Japanese BBQ', 'Macello',
                        'Smyth', 'The Loyalist', 'Eggsperience', 'Federales', 'Wise Owl Drinkery Cookhouse',
                        'RM Champagne',
                        'Forno Rosso Pizzeria Napoletana', 'Pompei', 'Bruges Brothers', 'Next', 'Gibsons Italia',
                        'Fulton Market Kitchen', 'Dosirak', 'Formentos', 'De Pasada', 'Busy Burger', 'Talay Chicago',
                        'Khaosan and Taylor', 'Maudes Liquor Bar', 'bellyQ', 'Bar Takito', 'Chez Joel Bistro',
                        'AceBounce',
                        'Elske', 'Booze Box', 'Ciao Cafe Wine Lounge', 'Bombacignos J C Inn', 'Native Foods Cafe',
                        'Umami Burger West Loop', 'South Branch Tavern Grille', 'Little Joes Circle Lounge',
                        'Sushi Dokku',
                        'Ellas Corner', 'La Sardine', 'Everest', 'Nellcôte', 'IDOF Fresh Mediterranean', 'Siam Rice',
                        'La Taberna Tapas on Halsted', 'Parlor Pizza Bar', 'Publican Quality Meats', 'Kaiser Tiger',
                        'Grange Hall Burger Bar', 'Lotus Cafe Bánh Mì Sandwiches', 'Yummy Thai', 'JP Graziano Grocery',
                        'Taste222', 'The Corned Beef Factory Sandwich Shop', 'The Beer Bistro', 'Lemongrass',
                        'Jims Original Hot Dog', 'The CrossRoads Bar Grill', 'Santorini', 'Cemitas Puebla',
                        'Asada Mexican Grill', 'Randolph Tavern', 'Fontano Subs', 'Scafuri Bakery', 'Chinese Yum Yum',
                        'Third Rail Tavern', 'Butterfly Sushi Bar Thai Cuisine', 'Bacci Pizzeria', 'Drum Monkey',
                        'China Night Cafe', 'Sidebar Grille', 'Express Grill', 'Cruz Blanca Brewery Taquería', 'Nia',
                        'Mr Broast UIC', 'Lalos Mexican Restaurant', 'Carms Beef', 'Kohan Japanese Restaurant',
                        'Latinicity', 'West Loop Salumi', 'Hana Sushi Chinese Thai', 'Bottom Lounge', 'Wishbone',
                        'Big Gs Pizza', 'Hello Tacos', 'Hawkeyes Bar Grill', 'Stax Cafe', 'Sushi Pink',
                        'Frietkoten Belgian Fries Beer', 'Arturo Express', 'Cellars Market', 'Eriks Deli',
                        'Ginos East South Loop', 'Fruve xPress Juicery', 'The Lounge', 'DoRite Donuts Chicken',
                        'Dia De Los Tamales', 'Freshii', 'Amarit Thai Sushi', 'Morgan Street Cafe', 'ChickfilA',
                        'Vintage Lounge', 'Palace Grill', 'Mughal India', 'M2 Cafe', 'Tiny Tapp Cafe', 'Caffe Baci',
                        'Babas Village', 'Smoked On Taylor', 'Burrito Bravo', 'Couscous Restaurant', 'Rosatis Pizza',
                        'Jaipur', 'Ovie Bar Grill', 'The Bar 10 Doors', 'Jackson Tavern', 'Volcano Sushi Cafe',
                        'Alhambra Palace', 'ONeils on Wells', 'Pockets', 'Taj Mahal', 'Robinsons No 1 Ribs',
                        'Jets Pizza',
                        'Popeyes Louisiana Kitchen', 'Nohea Cafe', 'Dominos Pizza', 'Kimura Sushi', 'Hillshire Brands',
                        'Au Bon Pain', 'Pittsfield Cafe', 'Tesori', 'Maxs Take Out', 'Tavern at the Park', 'Catch 35',
                        'Mr Browns Lounge', 'Hoyts Chicago', 'McCormick Schmicks Seafood Steaks', 'The Halal Guys',
                        'Infields', 'La Cantina', 'Simply Thalia', 'Food Court At the Miro', 'Lotus Banh Mi',
                        '213 Cafe',
                        'Pret a Manger', 'JJ Fish Chicken', 'Kafenio Lavazza', 'Chef Petros', 'Mr Submarine',
                        'M Burger',
                        'Mac Kellys Greens Things', 'Alonti Market Cafe', 'Cubano', 'Fairgrounds Coffee and Tea',
                        'Tokyo Lunchbox', 'Piano Terra', 'Boars Head Cafe', 'Alonti Cafe', 'Falafel Express',
                        'Mediterranean Delight', 'Milk Room', '2Twenty2 Tavern',
                        'The Living Room Bar W Chicago City Center', 'Drawing Room', 'Red Bar', 'Happys A Holiday Bar',
                        'Vol 39', 'M Bar', 'Brandos Speakeasy', 'Bridges Lobby Grill at London House',
                        'Revival Cafe Bar',
                        'Little Toasted', 'Bar Allegro', 'Kaseys Tavern', 'Two Zero Three', 'LH Rooftop', 'Game Room',
                        'Fox Bar', 'The Bar Below', 'SkyRide Tap', 'Club Vintage',
                        'City Winery Chicago at the Riverwalk',
                        'Lobby Bar at Palmer House', 'MacGuffins Bar Lounge', 'Columbus Tap', 'The Junction', 'Amuse',
                        'Prairie School', 'Waydown', 'Adamus', 'Phoenix Lounge', 'Cherry Circle Room',
                        'Green Street Local',
                        'Land Lake Kitchen', 'Fred Adolphs Pub', 'Lone Wolf', 'Chicago Theatre', 'The Aviary',
                        'Blind Barber', 'Emporium Fulton Market', 'Backdoor Saloon', 'The Zodiac Room', 'The Allis',
                        'Refuge Live', 'Chicago Union Station Metropolitan Lounge', 'Jazzin at the Shedd',
                        'Chicago Jazz Festival', 'Tantrum', 'Pedersen Room', 'Civic Opera House', 'Congress Lounge',
                        'Chicago Blues Festival', 'Beatrix Fulton Market', 'Auditorium Theatre', 'Artists Cafe',
                        '231 Cafe',
                        'Cyranos Cafe On The River', 'Lobby Lounge', 'GCue Billiards', 'Prime Matts At The Blackstone',
                        'Rittergut Wine Bar', 'Chicago Symphony Orchestra', 'Jazz Showcase', 'Florian Opera Bistro',
                        'Wabash Tap', 'Vice District Taproom', 'M Lounge', 'PhD Pub', 'Bracket Room', 'Square One',
                        'Huntington Bank Pavilion', 'Taste of Randolph Street', 'Hashbrowns', 'Henry Rooftop',
                        'The Hive',
                        'Cettas', 'Cobra Lounge', 'WestEnd', 'The Stanley Club', 'Epiphany', 'City Winery',
                        'CLE Cigar Company', 'The Mine Music Hall', '8fifty8', 'ThreeOneOne']

remaining_restaurant_names = ['capriottis sandwich shop', 'cobra lounge', 'chicago waffles', 'alonti market cafe',
                              'dosirak',
                              'lh rooftop', 'the madison bar and kitchen', 'jasons deli', 'the art of pizza',
                              'reggies pizza express', 'giordanos', 'jackson tavern', 'chicago jazz festival',
                              'express grill',
                              'kurah mediterranean', 'taco fresco', 'new orleans kitchen', 'habanero baja grill',
                              'chicago pizza boss', 'tradition', 'the aviary', 'kaiser tiger', 'little goat diner',
                              'mrs levys deli', 'pokéworks', 'city winery chicago at the riverwalk', 'first draft',
                              'the bar 10 doors', '213 cafe', 'bockwinkels',
                              'the living room bar w chicago city center',
                              'cettas', 'jj fish chicken', 'obriens riverwalk cafe', 'cosi', 'bellyq',
                              'fruve xpress juicery',
                              'galata turkish restaurant', 'land lake kitchen', 'park cafe', 'ramen takeya',
                              'trattoria no 10',
                              'the corned beef factory sandwich shop', 'two zero three', 'freshii', 'china night cafe',
                              'maxs take out', 'mezcalina', 'congress lounge', 'brandos speakeasy',
                              'beatrix fulton market',
                              'iii forks', 'silk road', 'columbus tap', 'leña brava', 'jazz showcase',
                              'beef and brandy restaurant', 'vice district taproom', 'flo santos', 'ricanos',
                              'weather mark tavern', 'hawkeyes bar grill', 'refuge live', 'asada mexican grill',
                              'dos toros taqueria', 'cold storage', 'little joes circle lounge',
                              'boni vino ristorante pizzeria',
                              'bar allegro', 'chicken farm shop', 'mercat a la planxa', 'couscous restaurant',
                              'lotus banh mi',
                              'lukes lobster city hall', 'american craft kitchen bar', 'just salad',
                              'jp graziano grocery',
                              'oasis cafe', 'tokyo lunch boxes', 'fontanos subs', 'mughal india',
                              'the eastman egg company',
                              'mac kellys greens things', 'ge pa de caffe', 'boleo', 'ellas corner', 'half sour',
                              'pita express',
                              'farmers fridge', 'rudys bar grille', 'panera bread', 'be leaf', 'halsted street deli',
                              'protein bar', 'the scout', 'randolph tavern', 'la bamba', 'market creations cafe',
                              'toni patisserie cafe', 'frietkoten belgian fries beer', 'plymouth rooftop bar grill',
                              'hoyts chicago', 'taste222', 'duck duck goat', 'greek kitchen',
                              'burger bar chicago south loop',
                              'west loop salumi', 'sushi dokku', 'frannies cafe', 'drum monkey', 'cubano',
                              'mixed greens',
                              'early society', 'kome japanese eatery', 'marc burger', '231 cafe', 'au bon pain',
                              'the loyalist',
                              'gcue billiards', 'alhambra palace', 'chicago blues festival', 'terzo piano',
                              'the midamerica club',
                              'oneils on wells', 'one north kitchen bar', 'rosebud prime', 'sofi restaurant',
                              'ginos east south loop', 'eleven city diner', 'wise owl drinkery cookhouse',
                              'kafenio lavazza',
                              'taj mahal', 'pats pizzeria', 'pazzos', 'south loop club', 'antique taco chiquito',
                              'stocks and blondes', 'broken english taco pub the loop', 'monteverde', 'aurelios pizza',
                              'high five ramen', 'ceres cafe', 'caffè baci', 'wishbone', 'the bongo room',
                              'mercato at rustleroux', 'tuscany taylor', 'bob cha', 'hillshire brands', 'palace grill',
                              'dominos pizza', 'cle cigar company', 'catch 35', 'market thyme', 'cardozos pub',
                              'nepal house indian nepalese', 'prairie school', 'the lounge', 'la sardine',
                              'hero coffee bar',
                              'happys a holiday bar', 'bake for me', 'blvd', 'drawing room', 'metropolis', 'epiphany',
                              'huntington bank pavilion', 'parlor pizza bar', 'rosals',
                              'cocos famous deep fried lobster',
                              'bad hunter', 'fairgrounds coffee and tea', 'food court at the miro', 'bottom lounge',
                              'smyth',
                              'jimmy johns', 'macguffins bar lounge', 'kamehachi', 'tufanos vernon park tap',
                              'yummy thai',
                              'club vintage', 'pierogi heaven', 'red bar', 'atwood', 'nia', 'lobby lounge',
                              'which wich',
                              'fontano subs', 'volcano sushi cafe', 'nohea cafe', 'stock and ledger',
                              'halsted street deli bagel',
                              'au cheval', 'gayles best ever grilled cheese', 'urbanbelly', 'roanoke restaurant',
                              'avanti caffé',
                              'the allis', 'mr submarine', 'hannahs bretzel', 'ciao cafe wine lounge', 'the florentine',
                              'bella bacinos', 'lone wolf', 'chez joel bistro', 'cindys', 'big gs pizza',
                              'boars head cafe',
                              'the commons club', 'sociale chicago', 'gibsons italia', 'chicken planet', 'threeoneone',
                              'mai tai sushi and sake bar', 'mac kellys', 'pedersen room', 'the metropolitan club',
                              'green street smoked meats', 'le pain quotidien', 'mr broast uic',
                              'heaven on seven wabash',
                              'state and lake chicago tavern', 'staytion market bar', 'sopraffina marketcaffe',
                              'bombacignos j c inn', 'robinsons no 1 ribs', 'mccormick schmicks seafood steaks',
                              'sweetwater tavern and grille', 'chinese yum yum', 'the junction', 'prime provisions',
                              'jaipur',
                              'kim carlos hot dog stand', 'the crossroads bar grill', 'muscle maker grill',
                              'pret a manger',
                              'square one', 'mezza mediterranean grill', 'hot woks cool sushi', 'federales', 'filini',
                              'raised urban rooftop bar', 'benjyehuda', 'harrys sandwich shop', 'the publican',
                              'vintage lounge',
                              'great street', '8fifty8', 'rosatis pizza', 'kimura sushi', 'bucks four star grill',
                              'jazzin at the shedd', 'tokyo lunch boxes catering', 'ara on', 'tiny tapp cafe',
                              'vapiano chicago downtown', 'potters', 'rm champagne', 'm bar', 'minghin cuisine',
                              '1901 at acebounce', 'zoup', 'the link chicago', 'sixty five chinese restaurant',
                              'guss world famous fried chicken', 'acebounce', 'buddy guys legends', 'sushi sai',
                              'eriks deli',
                              'ryo sushi', 'the dearborn', 'dorite donuts chicken', 'phoenix lounge',
                              'fulton market kitchen',
                              'saucy porka', 'the beer bistro', 'elske', 'green apple phoever', 'pompei',
                              'cactus bar grill',
                              'townhouse restaurant wine bar', 'bonci', 'corner bakery cafe', 'booze box',
                              'market creations prudential plaza', 'pastoral', 'de pasada',
                              'the grillroom chophouse wine bar',
                              'jade court', 'yolk south loop', 'bar louie', 'nesh mediterranean grill', 'honeygrow',
                              'seven bar and restaurant', 'osaka sushi express fresh fruit smoothies', 'poke roll',
                              'the field bistro', 'dia de los tamales', 'south branch tavern grille',
                              'sweet maple cafe',
                              'goddess and the baker', 'idof i dream of falafel', 'la cocina mexican grill',
                              'skyride tap',
                              'mickys chicken fish', 'la sirena clandestina', 'primebar', 'flat top grill', 'soup barz',
                              'elephant castle', 'union squared', 'lasalle cafe luna', 'next', 'publican quality meats',
                              'lobby bar at palmer house', 'swift sons', 'forno rosso pizzeria napoletana',
                              'lloyds chicago',
                              'latinicity', 'm burger', 'game room', 'arciel', 'mediterranean delight', 'meis kitchen',
                              'bar takito', 'revival food hall', 'florian opera bistro', 'kitty osheas',
                              'villains chicago',
                              'vivere', 'east asian bistro', 'gold coast dogs', 'tesori', 'ipo',
                              'bulldog ale housechicago',
                              'the halal guys', 'als beef', 'everest', 'alonti cafe', 'park grill at millennium park',
                              'conte di savoia', 'phd pub', 'crêpe bistro', 'bombay wraps', 'falafel express',
                              'popeyes louisiana kitchen', 'ovie bar grill', 'civic opera house',
                              'university club of chicago',
                              '2twenty2 tavern', 'fred adolphs pub', 'burrito bravo', 'eggys diner',
                              'the budlong revival food hall', 'lalos mexican restaurant', 'the bar below',
                              'the walnut room',
                              'lou malnatis pizzeria', 'the mine music hall', 'potbelly sandwich shop',
                              'mr browns lounge',
                              'wabash tap', 'good stuff eatery', 'fulton market company', 'bibibop asian grill',
                              'beatrix market',
                              'viaggio ristorante lounge', 'pazzos 311', 'niu b', 'santorini', 'brown bag seafood',
                              'bridges lobby grill at london house', 'emerald loop', 'nellcôte', 'nandos periperi',
                              'taylor gourmet', 'umai', 'exchequer restaurant pub', 'naansense', 'armands victory tap',
                              'ajida',
                              'talay chicago', 'rivers', 'gioco', 'qdoba mexican eats', 'harolds chicken shack',
                              '720 south bar grill', 'city winery', 'russian tea time', 'lotus cafe bánh mì sandwiches',
                              'urban counter', 'the fat shallot', 'acanto', 'la cantina', 'naf naf grill', 'caffe baci',
                              'fox bar', 'morgan street cafe', 'blind barber', 'stax cafe', 'cellars market',
                              'the office',
                              'la catina chophouse', 'lemongrass', 'nutella cafe', 'the marq', 'steadfast',
                              'eggsperience',
                              'hana sushi chinese thai', 'backdoor saloon', 'prime matts at the blackstone', 'infields',
                              'sweet swabian', 'city social', 'shake shack', 'taste of randolph street',
                              'billy goat tavern lake street', 'the hive', 'gyukaku japanese bbq', 'urban market',
                              'francescas on taylor', 'chicago curry house', 'chilango mexican street food', 'cafecito',
                              'five guys', 'tokyo lunchbox', 'lockwood restaurant bar', 'macello',
                              'emporium fulton market',
                              'westend', 'la lagartija taqueria', 'waydown', 'sidebar grille', 'tutto italiano',
                              'field bistro',
                              'jets pizza', 'chicago symphony orchestra', 'armands pizzeria', 'mallers deli',
                              'hashbrowns',
                              'bruges brothers', 'sushi pink', 'thai spoon and sushi', 'lobo rey', 'tavern at the park',
                              'spanglish mexican kitchen', 'smoked on taylor', 'millers pub', 'el che bar',
                              'himalayan restaurant', 'pita heaven', 'giordanos jackson',
                              'furious spoon revival food hall',
                              'costa vida fresh mexican grill', 'olive mediterranean grill', 'la cocina',
                              'taco burrito king',
                              'formentos', 'frontera fresco', 'ruchi', 'maudes liquor bar', 'siam rice', 'vol 39',
                              'kohan japanese restaurant', 'brightwok kitchen', 'adamus', 'lukes italian beef',
                              'meli cafe',
                              'paulys pizzeria', 'little branch cafe', 'fountain café', 'pittsfield cafe', 'amuse',
                              'flacos tacos', 'sweetgreen', 'bacci pizzeria', 'la taberna tapas on halsted', 'porkchop',
                              'pearl brasserie', 'pockets', 'rittergut wine bar', 'henry rooftop', 'beezzee fresh food',
                              'cochon volant brasserie', 'cruz blanca brewery taquería', 'aire', 'the landing',
                              'kaseys tavern',
                              'm lounge', 'green street local', 'simply thalia', 'pueblo chicago', 'wow bao',
                              'poke poké',
                              'wildberry pancakes and cafe', 'stetsons modern steak sushi', 'kai sushi', 'gideon sweet',
                              'butterfly sushi bar thai cuisine', 'babas village', 'bar siena', 'petterinos',
                              'off the tracks grill', 'the press room', 'girl the goat', 'tantrum',
                              'khaosan and taylor',
                              'roister', 'idof fresh mediterranean', 'chef petros', 'falafel island',
                              'auditorium theatre',
                              'delmonico', 'asian outpost', 'umami burger west loop', 'm2 cafe', 'seven lions',
                              'hax hops hamburgers', 'i love sushi', 'the living room', 'burrito beach', 'the rosebud',
                              'spotted monkey', 'native foods cafe', 'ml kitchen', 'city mouse', 'blackwood bbq',
                              'wingstop',
                              'forum 55', 'pizanos pizza', 'café press', 'arturo express', 'the franklin tap',
                              'the stanley club',
                              'chucks a kerry simon kitchen', 'amarit thai sushi', 'bowls bao',
                              'relish chicago hot dogs',
                              'chicago theatre', 'bracket room', 'the zodiac room', 'tilted kilt pub eatery',
                              'noodles company',
                              '312 chicago', 'ronnys original chicago steak house', 'cemitas puebla', 'artists cafe',
                              'scafuri bakery', 'piano terra', 'revival cafe bar', 'cyranos cafe on the river',
                              'the berghoff restaurant', 'chicago union station metropolitan lounge', 'chickfila',
                              'little toasted', 'the gage', 'regards to edith']

class YelpReviewSpider(scrapy.Spider):
    name = 'yelpreviews'

    def start_requests(self):
        baseurl = 'https://www.yelp.com/biz/'
        for name in remaining_restaurant_names:
            path = name.lower().split()  # get actual words of the restaurant name
            path = '-'.join(path)  # join wiht - as required
            url = path + '-chicago'  # append chicago to enforce searching for business in chicago only

            yield scrapy.Request(baseurl + url, callback=self.parse)

    def parse(self, response):
        restaurant = response.url[25:].split('-')
        restaurant_name = ' '.join(restaurant[:-1])

        response.selector.remove_namespaces()

        ratings = response.xpath('//div[contains(@class, "i-stars")]/@title').extract()
        reviews_ = response.xpath("//p[contains(@lang, 'en')]").extract()

        self.logger.info("Restaurant Name" + restaurant_name + ": Number of ratings = " + str(len(ratings)))

        for i, (rating, review_para) in enumerate(zip(ratings, reviews_)):
            # clean rating
            rating = int(rating[0])

            review_para = review_para[13:-4] # remove the <p > </p> parts
            review_para = review_para.replace('<br>', '')  # replace new lines and breaks

            # Ref: https://stackoverflow.com/questions/10993612/python-removing-xa0-from-string
            review = unicodedata.normalize('NFKD', review_para)

            item = {
                'restaurant_name': restaurant_name,
                'review': review,
                'rating': rating
            }
            yield item

        current_page = response.xpath("//div[contains(@class, 'page-of-pages')]/text()").extract_first()

        if current_page is not None:
            current_page = current_page.replace('\n', '').strip().split()
            current_idx = int(current_page[1])
            total_idx = int(current_page[-1])

            if current_idx + 1 <= total_idx:
                start_count = 20 * (current_idx + 1)

                baseurl = response.url[:25]
                name = restaurant_name.split()
                name = '-'.join(name)
                name = name + '-chicago?start=%d' % start_count
                url = baseurl + name

                message = 'restaurant = ' + restaurant_name + ' | following next page to ' + url
                self.logger.info(message)

                if url is not None:
                    yield scrapy.Request(url, callback=self.parse)
